!function(f){f.fn.animateScroll=function(e){var o={offset:100,wHeight:f(window).height(),elem:this,delta:100,prevTop:f(window).scrollTop(),buffer:0};if("function"==typeof e)o.handler=e;else{if("object"!=typeof e)return this;f.extend(o,e)}function t(e){"the first run"===e&&(o.buffer=o.delta,o.offset*=-1);var t=f(window).scrollTop();t>o.prevTop?o.buffer+=t-o.prevTop:t<o.prevTop&&(o.buffer-=o.prevTop-t),o.prevTop=t,Math.abs(o.buffer)<o.delta||(o.buffer=0,wBottom=t+o.wHeight,o.elem.each(function(){var e=f(this);if(elemTop=Math.round(e.offset().top),elemBottom=elemTop+e.height(),wBottom-o.offset>elemTop&&elemTop>t+o.offset||wBottom-o.offset>elemBottom&&elemBottom>t+o.offset){if(e.data("animated"))return;e.data("animated","true"),o.handler&&o.handler.apply(this,arguments),o.classToAdd&&e.addClass(o.classToAdd)}}),"the first run"===e&&(o.offset*=-1))}return f(window).bind("scroll.animateScroll",t),t("the first run"),f(window).resize(function(e){o.wHeight=e.currentTarget.innerHeight}),this}}(jQuery);